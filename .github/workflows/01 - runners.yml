name: 01 - Runner Info Demo

on:
  workflow_dispatch:

jobs:
  runner-info:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]

    steps:
      - name: Show runner info
        shell: bash
        run: |
          echo "========================================"
          echo " RUNNING ON: ${{ matrix.os }}"
          echo "========================================"

          if [[ "$RUNNER_OS" == "Linux" ]]; then
            echo "=== OS INFO ==="
            uname -a

            echo "=== CPU INFO ==="
            lscpu

            echo "=== MEMORY INFO ==="
            free -h

          elif [[ "$RUNNER_OS" == "Windows" ]]; then
            echo "=== OS INFO ==="
            systeminfo | findstr /B /C:"OS Name" /C:"OS Version"

            echo "=== CPU INFO ==="
            wmic cpu get Name,NumberOfCores,NumberOfLogicalProcessors

            echo "=== MEMORY INFO ==="
            wmic os get TotalVisibleMemorySize,FreePhysicalMemory

          elif [[ "$RUNNER_OS" == "macOS" ]]; then
            echo "=== OS INFO ==="
            sw_vers

            echo "=== CPU INFO ==="
            sysctl -n machdep.cpu.brand_string
            sysctl -a | grep machdep.cpu | grep core_count

            echo "=== MEMORY INFO ==="
            sysctl hw.memsize
          fi
